// This file has been autogenerated from a class added in the UI designer.

using System;
using System.ComponentModel;

using MonoTouch.SlideMenu;
using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace BlahguaMobile.IOS
{
	public partial class BGRollViewController : UICollectionViewController
	{
		#region Fields

		private SlideMenuController leftSlidingPanel;

		#endregion

		#region Properties
		#endregion

		public BGRollViewController (IntPtr handle) : base (handle)
		{
		}

		#region View Controller Overriden Methods

		public override void ViewDidLoad ()
		{
			base.ViewDidLoad ();

			View.BackgroundColor = UIColor.FromPatternImage (UIImage.FromFile ("grayBack.png"));

			leftSlidingPanel = ((AppDelegate)UIApplication.SharedApplication.Delegate).SlideMenu;

			NavigationItem.LeftBarButtonItem = new UIBarButtonItem (UIImage.FromFile("leftMenuButton.png"), UIBarButtonItemStyle.Plain, MenuButtonClicked);
			if(BlahguaCore.BlahguaAPIObject.Current.CurrentUser == null)
			{
				NavigationItem.RightBarButtonItem = new UIBarButtonItem ("Log in", UIBarButtonItemStyle.Plain, LoginButtonClicked);
			}
			else
			{
				NavigationItem.RightBarButtonItem = new UIBarButtonItem ("Ok", UIBarButtonItemStyle.Plain, LoginButtonClicked);
			}

			BlahguaCore.BlahguaAPIObject.Current.PropertyChanged += (object sender, PropertyChangedEventArgs e) => 
			{
				if(e.PropertyName == "CurrentChannel")
				{
					CollectionView.ReloadData();
				}
			};
		}

		#endregion

		#region Methods

		private void MenuButtonClicked(object sender, EventArgs args)
		{
			leftSlidingPanel.ToggleMenuAnimated ();
		}

		private void LoginButtonClicked(object sender, EventArgs args)
		{

		}
			

		#endregion
	}
}
